<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NUCAPT: Dataset {{ name }}</title>
    {% include '_includes.html' %}
    <script type = 'text/javascript' language="javascript">
    </script>
</head>
<body>
    <div class="container">
        {% from "_utils.html" import make_header %}
        {{ make_header([(name,'/dataset/' + name )]) }}
        <h1>Dataset {{ name }}</h1>

        {% if errors | length > 0 %}
        <h2>Dataset Parsing Errors</h2>

        <ul>
            {% for error in errors %}
            <li>{{ error | safe }}</li>
            {% endfor %}
        </ul>
        {% endif %}

        {% if dataset is not none %}
        <h2>Dataset Information</h2>
        <p>Location: {{ dataset.path }}</p>

        <h3>Title</h3>
        <p>{{ dataset.title | safe }}</p>

        <h3>Authors</h3>
        {% for author in dataset.authors %}
        <p>{{ author['first_name'] | safe }} {{ author['last_name'] | safe }} ({{ author['affiliation'] | safe }})</p>
        {% endfor %}

        <h3>Abstract</h3>

        <p>{{ dataset.abstract | safe }}</p>

        <h3>Dates</h3>

        {% for name,date in dataset.dates.items() %}
        <p><label>{{name | safe}}</label>: {{ date | safe }}</p>
        {% endfor %}
        {% endif %}

        <h2>Samples</h2>

        <p>A listing the samples currently associated with this dataset</p>

        <table class="table">
            <tr><th>Sample</th><th>Title</th><th>Actions</th></tr>
            {% for sample in samples %}
            <tr>
                <td>{{ sample['sample_name'] | safe }}</td>
                <td>{{ sample.load_sample_information()['sample_title'] | safe }}</td>
                <td><a href="{{ name }}/sample/{{ sample['sample_name'] }}">View</a></td>
            </tr>
            {% endfor %}
        </table>

        <h2>Actions</h2>

        <h3><a href="/dataset/{{name}}/sample/create">Add Sample</a></h3>

    </div>
</body>
</html>
