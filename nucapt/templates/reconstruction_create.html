<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>NUCAPT: Add Reconstruction {{ sample_name }}</title>
    {% include '_includes.html' %}
    {% import '_leap_sample_forms.html' as mf %}
    {% from '_form_utils.html' import render_field, render_keyvalue_field %}
    <script src="{{ url_for('static', filename='js/util.js') }}"></script>
    <script>
        $(document).ready(function () {
            keyValueTable("metadata-table", "metadata");
        });
    </script>
</head>
<body>
<div class="container" enctype="multipart/form-data">
    {% from "_utils.html" import make_header, render_errors %}
    {{ make_header([(dataset_name,'/dataset/' + dataset_name),
        (sample_name, '/dataset/%s/sample/'%sample_name),
        ('Add Reconstruction', 'create')
        ]) }}
    <h1>Add Reconstruction to {{ sample_name }}</h1>

    <p>Add a new reconstruction to an sample. You need to specify the name of this reconstruction and the reconstruction method</p>

    {{ render_errors(errors) }}

    <form class='form-horizontal' method=post enctype="multipart/form-data">

        <h2>General Metadata</h2>

        <p>Simple description of this reconstruction.</p>

        {{ render_field(form.name) }}

        {{ render_field(form.title) }}

        {{ render_field(form.description) }}

        {{ render_keyvalue_field(form.metadata, 'metadata-table') }}

        <h2>Reconstruction Settings</h2>

        <p>Metadata about how this reconstruction was performed. Fill out as many are applicable.</p>

        {{ render_field(form.reconstruction_method, class="") }}

        {{ render_field(form.tip_radius) }}

        {{ render_field(form.shank_angle) }}

        {{ render_field(form.tip_image) }}

        <h2>Data Files</h2>

        <p>Data files holding the reconstruction data</p>

        {{ render_field(form.pos_file) }}

        {{ render_field(form.rrng_file) }}

        <p><input type="submit" class="btn-lg btn-primary" value="Add Reconstruction"/></p>

    </form>

</div>
</body>
</html>